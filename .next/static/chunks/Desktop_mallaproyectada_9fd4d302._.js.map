{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carac/Desktop/mallaproyectada/lib/auth.ts"],"sourcesContent":["// src/lib/auth.ts\r\n// src/lib/auth.ts\r\nexport type LoginResponse = {\r\n  rut: string;\r\n  carreras: {\r\n    codigo: string;\r\n    nombre: string;\r\n    catalogo: string;\r\n  }[];\r\n  token?: string; // opcional, si tu backend genera un JWT\r\n};\r\n\r\nexport async function login(email: string, password: string): Promise<LoginResponse> {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE}/auth/login`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ email, password }),\r\n    credentials: 'include', // si tu backend maneja cookie de sesión\r\n  });\r\n\r\n  if (!res.ok) {\r\n    throw new Error('Error de autenticación');\r\n  }\r\n\r\n  return res.json() as Promise<LoginResponse>;\r\n}\r\n"],"names":[],"mappings":"AAAA,kBAAkB;AAClB,kBAAkB;;;;;AAYW;AADtB,eAAe,MAAM,KAAa,EAAE,QAAgB;IACzD,MAAM,MAAM,MAAM,MAAM,AAAC,GAAmC,kEAAA,gBAAc;QACxE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAS;QACvC,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carac/Desktop/mallaproyectada/lib/session.ts"],"sourcesContent":["// src/lib/session.ts\r\nimport Cookies from 'js-cookie';\r\nimport type { LoginResponse } from './auth';\r\n\r\nconst USER_KEY = 'user';\r\nconst TOKEN_KEY = 'token';\r\n\r\nexport function setUser(user: LoginResponse) {\r\n  Cookies.set(USER_KEY, JSON.stringify(user), { sameSite: 'lax' });\r\n  if (user.token) {\r\n    Cookies.set(TOKEN_KEY, user.token, { sameSite: 'lax' });\r\n  }\r\n}\r\n\r\nexport function getUser(): LoginResponse | null {\r\n  const raw = Cookies.get(USER_KEY);\r\n  return raw ? (JSON.parse(raw) as LoginResponse) : null;\r\n}\r\n\r\nexport function clearUser() {\r\n  Cookies.remove(USER_KEY);\r\n  Cookies.remove(TOKEN_KEY);\r\n}\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;;;AACrB;;AAGA,MAAM,WAAW;AACjB,MAAM,YAAY;AAEX,SAAS,QAAQ,IAAmB;IACzC,iMAAO,CAAC,GAAG,CAAC,UAAU,KAAK,SAAS,CAAC,OAAO;QAAE,UAAU;IAAM;IAC9D,IAAI,KAAK,KAAK,EAAE;QACd,iMAAO,CAAC,GAAG,CAAC,WAAW,KAAK,KAAK,EAAE;YAAE,UAAU;QAAM;IACvD;AACF;AAEO,SAAS;IACd,MAAM,MAAM,iMAAO,CAAC,GAAG,CAAC;IACxB,OAAO,MAAO,KAAK,KAAK,CAAC,OAAyB;AACpD;AAEO,SAAS;IACd,iMAAO,CAAC,MAAM,CAAC;IACf,iMAAO,CAAC,MAAM,CAAC;AACjB","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/carac/Desktop/mallaproyectada/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { login } from '@/lib/auth';\r\nimport { setUser } from '@/lib/session';\r\nimport Image from 'next/image';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setLoading(true);\r\n    try {\r\n      const user = await login(email, password);\r\n      setUser(user);\r\n      router.replace('/dashboard');\r\n    } catch (err: unknown) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError('Error desconocido');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-[#0F758C] to-[#154D59] p-6\">\r\n      {/* Logos */}\r\n    <div className=\"flex items-center justify-center gap-16 mb-6\">\r\n      <Image src=\"/ucnLogo.png\" alt=\"Logo UCN\" width={80} height={80} />\r\n      <Image src=\"/eicLogo.png\" alt=\"Logo Escuela Ingeniería\" width={180} height={100} />\r\n    </div>\r\n      {/* Título */}\r\n      <h1 className=\"text-2xl md:text-3xl font-bold text-[#E5E7EB] mb-8 text-center\">\r\n        ¡Bienvenidx a tu proyección académica!\r\n      </h1>\r\n\r\n      {/* Formulario */}\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"w-full max-w-sm bg-white/10 backdrop-blur-md p-8 rounded-2xl shadow-lg space-y-5\"\r\n      >\r\n\r\n        {/* Input Correo */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-[#E5E7EB] mb-1\">\r\n            Correo\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Ingrese su correo\"\r\n            className=\"w-full rounded-lg p-3 border border-[#E5E7EB] text-[#E5E7EB] placeholder-[#E5E7EB] focus:outline-none focus:ring-2 focus:ring-[#F29544]\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Input Contraseña */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-[#E5E7EB] mb-1\">\r\n            Contraseña\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Ingrese su contraseña\"\r\n            className=\"w-full rounded-lg p-3 border border-[#E5E7EB] text-[#E5E7EB] placeholder-[#E5E7EB] focus:outline-none focus:ring-2 focus:ring-[#F29544]\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Error */}\r\n        {error && (\r\n          <div className=\"bg-[#E5E7EB] rounded-md shadow-xl p-2 max-w-xs w-xs text-center\">\r\n            <h2 className=\"text-md font-semibold text-[#d62f20]\">Error</h2>\r\n            <p className=\"text-md text-gray-700 mt-1\">{error}</p>\r\n            <button\r\n              onClick={() => setError(null)}\r\n              className=\"mt-1 px-2 py-1 bg-[#F29544] hover:bg-[#d67520] text-[#E5E7EB] rounded-lg\"\r\n            >\r\n        Aceptar\r\n      </button>\r\n    </div>\r\n)}\r\n\r\n        {/* Botón */}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full flex items-center justify-center gap-2 bg-[#F29544] hover:bg-[#d67520] text-[#E5E7EB] font-semibold py-3 rounded-lg shadow-md transition-colors disabled:opacity-50\"\r\n        >\r\n          <span>→</span>\r\n          {loading ? 'Entrando...' : 'Iniciar sesión'}\r\n        </button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uMAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,uMAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uMAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uMAAQ,EAAC;IAEvC,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QACX,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,qJAAK,EAAC,OAAO;YAChC,IAAA,0JAAO,EAAC;YACR,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,KAAc;YACrB,IAAI,eAAe,OAAO,SAAS,IAAI,OAAO;iBACzC,SAAS;QAChB,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,2NAAC;QAAK,WAAU;;0BAEhB,2NAAC;gBAAI,WAAU;;kCACb,2NAAC,yKAAK;wBAAC,KAAI;wBAAe,KAAI;wBAAW,OAAO;wBAAI,QAAQ;;;;;;kCAC5D,2NAAC,yKAAK;wBAAC,KAAI;wBAAe,KAAI;wBAA0B,OAAO;wBAAK,QAAQ;;;;;;;;;;;;0BAG5E,2NAAC;gBAAG,WAAU;0BAAiE;;;;;;0BAK/E,2NAAC;gBACC,UAAU;gBACV,WAAU;;kCAIV,2NAAC;;0CACC,2NAAC;gCAAM,WAAU;0CAAgD;;;;;;0CAGjE,2NAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAK5C,2NAAC;;0CACC,2NAAC;gCAAM,WAAU;0CAAgD;;;;;;0CAGjE,2NAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;oBAK9C,uBACC,2NAAC;wBAAI,WAAU;;0CACb,2NAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,2NAAC;gCAAE,WAAU;0CAA8B;;;;;;0CAC3C,2NAAC;gCACC,SAAS,IAAM,SAAS;gCACxB,WAAU;0CACX;;;;;;;;;;;;kCAOL,2NAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;;0CAEV,2NAAC;0CAAK;;;;;;4BACL,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;AAKrC;GA/FwB;;QACP,gLAAS;;;KADF","debugId":null}}]
}